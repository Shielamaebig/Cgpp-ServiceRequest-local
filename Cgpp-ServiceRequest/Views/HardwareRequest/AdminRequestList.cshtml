
@{
    ViewBag.Title = "AdminRequestList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h4 class="card-title mb-2 ms-2">
    Open List
</h4>
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title d-flex justify-content-between mx-2">

                </h4>
                <h6 class="card-subtitle"></h6>
                <div class="table-responsive">
                    <table id="hardwareRequestList" class="table table-condensed display">
                        <thead>
                            <tr>
                                <th>Ticket</th>
                                <th>Date Posted</th>
                                <th>Reported by</th>
                                <th>Issue</th>
                                <th>Status</th>
                                <th class="text-center">Action</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="viewmodal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center">
                <p class="heading card-title" id="exampleModalLabel">
                    <h5 class="heading card-title d-flex justify-content-center text-center ">Request Details</h5>
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <!-- Bordered Tabs -->
                            <ul class="nav nav-tabs nav-tabs-bordered">

                                <li class="nav-item">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Attachments</button>
                                </li>
                            </ul>
                            <div class="tab-content pt-2">
                                <div class="tab-pane fade show active profile-overview" id="profile-overview">
                                    <form id="viewRequest">
                                        <div class="row">
                                            <div class="mb-4 text-center mt-4">
                                                <small class="card-title">Client Information</small>
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Ticket Number</label>
                                                <input type="text" class="form-control mb-2" name="ticket" id="ticket" disabled />
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for=""> Date Reported</label>
                                                <input type="text" class="form-control mb-2" name="dateAdded" id="dateAdded" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Reported By</label>
                                                <input type="text" class="form-control mb-2" name="fullName" id="fullName" disabled />
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="">Phone Number</label>
                                                <input type="text" class="form-control mb-2" name="mobileNumber" id="mobileNumber" disabled />
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="">Department</label>
                                                <input class="form-control" id="departmentName" name="departmentName" disabled />
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="">Division</label>
                                                <input class="form-control" id="divisionName" name="divisionName" disabled />
                                            </div>

                                            <div class=" text-center mt-3">
                                                <small class="card-title">Hardware Request Details</small>
                                            </div>
                                            <div class="form-group col-8 col-sm-6 mt-3">
                                                <label for="">Service Category</label>
                                                <input type="text" class="form-control mb-2" name="hardwareName" id="hardwareName" disabled />
                                            </div>
                                            <div class="form-group col-sm-6 mt-3">
                                                <label for=""> Model Name</label>
                                                <input type="text" class="form-control mb-2" name="modelName" id="modelName" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for=""> Unit</label>
                                                <input class="form-control" id="uniTypes" name="uniTypes" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Brand Name</label>
                                                <input class="form-control" id="brandName" name="brandName" disabled />
                                            </div>
                                            <div class="row mt-4">
                                                <label for="FileName" class="col col-form-label ">Subject : </label>
                                                <div class="col-md-10">
                                                    <input type="text" class="form-control ms-4" id="documentLabel" name="FileName" disabled />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="" class="mt-3">Description</label>
                                                <textarea class="form-control mb-5" id="description" name="description" style="height: 200px;" disabled> </textarea>
                                            </div>

                                            <input type="hidden" id="id" name="id" />

                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane fade pt-3" id="profile-change-password">
                                    <table id="UploadList" class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Date Added
                                                </th>
                                                <th>
                                                    Image
                                                </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>

                            </div><!-- End Bordered Tabs -->
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="TechnicianModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-s modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header" >
                <p class="heading card-title" id="exampleModalLabel"><h5 class="card-title d-flex justify-content-between ">Assign Technician</h5></p>
            </div>
            <div class="modal-body">
                <form id="assignTech">
                    <div class="row">
                        <div class="form-group">
                            <select type="text" class="form-control  mb-2 hardwareTechnician " id="hardwareTechnicianId" name="hardwareTechnicianId" style="width:100%;">
                            </select>
                        </div>
                    </div>
                    <input type="hidden" id="id" name="id" />
                    <input type="hidden" id="hardwareUserRequestId" name="hardwareUserRequestId" />
                </form>
            </div>
            <div class="modal-footer">
                <button id="updateTechnician" type="button" class="btn btn-success update-technician">Submit</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="ReportModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center">
                <p class="heading card-title" id="exampleModalLabel">
                    <h5 class="heading card-title d-flex justify-content-center text-center text-white">  Request Details</h5>
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="transactional">
                <input type="hidden" id="hardwareUserRequestId" name="hardwareUserRequestId" />
            </form>

            <div class="modal-body">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <div class="table-responsive">
                                <table id="techList2" class="table" cellspacing="0" width="100%">

                                    <thead>
                                        <tr>
                                            <th>
                                                Date Assigned
                                            </th>
                                            <th>Ticket</th>
                                            <th>Reported by</th>
                                            <th>Issue</th>
                                            <th> Task</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="AssignedTech" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-s modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <p class="heading card-title" id="exampleModalLabel"><h5 class="card-title d-flex justify-content-between ">Assign Technician</h5></p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="assigneform">
                    <div class="row">
                        <div class="form-group">
                            <div class="form-group col-md-12">
                                <label for="">Assigned Technician</label>
                                <input class="form-control" id="technicianName" name="technicianName"  readonly/>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="id" name="id" />
                    <input type="hidden" id="technicianReportId" name="technicianReportId" />
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="TechnicianModal2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-s modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <p class="heading card-title" id="exampleModalLabel"><h5 class="card-title d-flex justify-content-between ">Assign Technician</h5></p>
            </div>
            <div class="modal-body">
                <form id="assignTech2">
                    <div class="row">
                        <div class="form-group">
                            <select type="text" class="form-control mb-2 hardwareTechnician2" name="hardwareTechnicianId" id="hardwareTechnicianId" style="width: 100%;">
                            </select>
                        </div>
                    </div>
                    <input type="hidden" id="id" name="id" />
                    <input type="hidden" id="hardwareUserRequestId" name="hardwareUserRequestId" />
                </form>
            </div>
            <div class="modal-footer">
                <button id="updateTechnician2" type="button" class="btn btn-success update-technician">Submit</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="verifiedModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-s modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form id="verify">
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <div class="row">
                        <p>Do you want to Verified this Request to you?</p>
                    </div>
                    <input type="hidden" id="id" name="id" />
                    <input type="hidden" id="hardwareUserRequestId" name="hardwareUserRequestId" />
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">No</button>
                <button id="verified" type="button" class="btn btn-success update-request">Yes</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="viewmodal-resolved" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center">
                <p class="heading card-title" id="exampleModalLabel">
                    <h5 class="heading card-title d-flex justify-content-center text-center ">  Request Details</h5>
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <!-- Bordered Tabs -->
                            <ul class="nav nav-tabs nav-tabs-bordered">

                                <li class="nav-item">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#request-overview2">Report</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#attachments2">Attachments</button>
                                </li>
                            </ul>
                            <div class="tab-content pt-2">
                                <div class="tab-pane fade show active profile-overview" id="request-overview2">
                                    <form id="viewRequest-resolved">
                                        <div class="row">

                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Technician</label>
                                                <input class="form-control mt-2 mb-3" name="technicianName" id="technicianName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Date Assigned</label>
                                                <input class="form-control mt-2 mb-3" name="dateAssigned" id="dateAssigned" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Hardware Services</label>
                                                <input class="form-control mt-2 mb-3" name="hardwareName" id="hardwareName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Unit Name :</label>
                                                <input class="form-control mt-2 mb-3" name="uniTypes" id="uniTypes" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Unit Brand</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="brandName" id="brandName" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Model Name</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="modelName" id="modelName" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Findings After Repair</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="findingName" id="findingName" disabled />

                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Possible Cause</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="possibleCause" id="possibleCause" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Serial Number</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="serialNumber" id="serialNumber" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Unit Control No.</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="controlNumber" id="controlNumber" disabled />
                                            </div>
                                            <div class="form-group">
                                                <label for="" class="mt-3">Remarks</label>
                                                <textarea class="form-control" id="remarks" name="remarks" style="height: 200px;" disabled> </textarea>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateStarted" id="dateStarted" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateEnded" id="dateEnded" disabled />
                                            </div>
                                            <input type="hidden" id="technicianReportId" name="technicianReportId" />

                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane fade pt-3" id="attachments2">
                                    <table id="UploadList-progress" class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Date Added
                                                </th>
                                                <th>
                                                    Image
                                                </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade " id="viewmodal-verified" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center">
                <p class="heading card-title" id="exampleModalLabel">
                    <h5 class="heading card-title d-flex justify-content-center text-center ">  Request Details</h5>
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <!-- Bordered Tabs -->
                            <ul class="nav nav-tabs nav-tabs-bordered">

                                <li class="nav-item">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#request-overview2">Report</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#attachments2">Attachments</button>
                                </li>
                            </ul>
                            <div class="tab-content pt-2">
                                <div class="tab-pane fade show active profile-overview" id="request-overview2">
                                    <form id="viewRequest-verified">
                                        <div class="row">

                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Technician</label>
                                                <input class="form-control mt-2 mb-3" name="technicianName" id="technicianName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Date Assigned</label>
                                                <input class="form-control mt-2 mb-3" name="dateAssigned" id="dateAssigned" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Hardware Services</label>
                                                <input class="form-control mt-2 mb-3" name="hardwareName" id="hardwareName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Unit Name :</label>
                                                <input class="form-control mt-2 mb-3" name="uniTypes" id="uniTypes" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Unit Brand</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="brandName" id="brandName" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Model Name</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="modelName" id="modelName" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Findings After Repair</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="findingName" id="findingName" disabled />

                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Possible Cause</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="possibleCause" id="possibleCause" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Serial Number</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="serialNumber" id="serialNumber" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Unit Control No.</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="controlNumber" id="controlNumber" disabled />
                                            </div>
                                            <div class="form-group">
                                                <label for="" class="mt-3">Remarks</label>
                                                <textarea class="form-control" id="remarks" name="remarks" style="height: 200px;" disabled> </textarea>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateStarted" id="dateStarted" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateEnded" id="dateEnded" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date Verified</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateVerified" id="dateVerified" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Verified by</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="name" id="name" disabled />
                                            </div>
                                            <input type="hidden" id="technicianReportId" name="technicianReportId" />

                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane fade pt-3" id="attachments2">
                                    <table id="UploadList-progress2" class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Date Added
                                                </th>
                                                <th>
                                                    Image
                                                </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade " id="viewmodal-approved" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-xl modal-notify modal-info" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center">
                <p class="heading card-title" id="exampleModalLabel">
                    <h5 class="heading card-title d-flex justify-content-center text-center ">  Request Details</h5>
                </p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="col-xl-12">
                    <div class="card">
                        <div class="card-body pt-3">
                            <!-- Bordered Tabs -->
                            <ul class="nav nav-tabs nav-tabs-bordered">

                                <li class="nav-item">
                                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#request-overview3">Report</button>
                                </li>

                                <li class="nav-item">
                                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#attachments3">Attachments</button>
                                </li>
                            </ul>
                            <div class="tab-content pt-2">
                                <div class="tab-pane fade show active profile-overview" id="request-overview3">
                                    <form id="viewRequest-approved">
                                        <div class="row">

                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Technician</label>
                                                <input class="form-control mt-2 mb-3" name="technicianName" id="technicianName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Date Assigned</label>
                                                <input class="form-control mt-2 mb-3" name="dateAssigned" id="dateAssigned" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Hardware Services</label>
                                                <input class="form-control mt-2 mb-3" name="hardwareName" id="hardwareName" disabled />
                                            </div>
                                            <div class="form-group col-md-6 mb-2">
                                                <label for="">Unit Name :</label>
                                                <input class="form-control mt-2 mb-3" name="uniTypes" id="uniTypes" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Unit Brand</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="brandName" id="brandName" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Model Name</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="modelName" id="modelName" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Findings After Repair</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="findingName" id="findingName" disabled />

                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Possible Cause</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="possibleCause" id="possibleCause" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Serial Number</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="serialNumber" id="serialNumber" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Unit Control No.</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="controlNumber" id="controlNumber" disabled />
                                            </div>
                                            <div class="form-group">
                                                <label for="" class="mt-3">Remarks</label>
                                                <textarea class="form-control" id="remarks" name="remarks" style="height: 200px;" disabled> </textarea>
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateStarted" id="dateStarted" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Date & Time Started</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateEnded" id="dateEnded" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date Verified</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateVerified" id="dateVerified" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Verified by</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="name" id="name" disabled />
                                            </div>
                                            <div class="form-group col-sm-6">
                                                <label for="">Date Approved</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="dateApprove" id="dateApprove" disabled />
                                            </div>
                                            <div class="form-group col-8 col-sm-6">
                                                <label for="">Approved by</label>
                                                <input type="text" class="form-control mt-2 mb-3" name="nameApproval" id="nameApproval" disabled />
                                            </div>
                                            <div class="form-group">
                                                <label for="" class="mt-3">Super Admin Remarks</label>
                                                <textarea class="form-control" id="remarksApproval" name="remarksApproval" style="height: 200px;" disabled> </textarea>
                                            </div>
                                            <input type="hidden" id="technicianReportId" name="technicianReportId" />

                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane fade pt-3" id="attachments3">
                                    <table id="UploadList-progress3" class="table table-striped" cellspacing="0" width="100%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Date Added
                                                </th>
                                                <th>
                                                    Image
                                                </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="PrintModal" data-bs-backdrop="static" data-bs-keyboard="false" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-fullscreen" role="document">
        <div class="modal-content">
            <div class="modal-header justify-content-center ">
                <p class="heading card-title" id="exampleModalLabel"><h5 class="card-title d-flex justify-content-between">  Request Details</h5></p>
            </div>
            <div class="modal-body">
                <form id="print">
                    <div printbody" id="printbody" style="border: 2px solid black;">
                        <div class=" text-center d-flex justify-content-center mt-2 table-head">
                            <img src="~/image/cgpp-2.png" class="me-3 mt-0" style="height: 100px; width:100px;" />
                            <div style="font-size:13px;" class="mt-2">
                                <p class="p-0 m-0">Republic of The Philippines</p>
                                <p class="p-0 m-0">Office of The City Mayor</p>
                                <p class="p-0 m-0"><b>CITY MANAGEMENT INFORMATION SYSTEM DIVISION </b></p>
                                <p class="p-0 m-0"><b>SERVICE REQUEST FORM</b></p>
                                <p class="p-0 m-0">Puerto Princesa City</p>
                            </div>
                        </div>
                        <div class=" col-md-12 mt-2 ticketDate">
                            <div class='input-group date'>
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;">
                                    <span style="width: 147px;font-size:13px;height:25px;"> Date / Time </span>
                                </span>
                                <input class="form-control col-md-8 datenow" style="font-size: 13px; height: 25px;" name="dateTimeNow" id="dateTimeNow" value="@DateTime.Now.ToString("MMMM dd yyyy hh:mm tt")" disabled />
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;">
                                    <span style="width: 120px; font-size: 13px; height: 25px;">
                                        Job Order No:
                                    </span>
                                </span>
                                <input class="form-control ticketnow" name="ticket" id="ticket" style="border-radius: 0; font-size: 13px; height: 25px; " disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group harwareSc'>
                                <span class="input-group-text pt-2 p-1 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 163px; font-size: 13px; height: 25px; "> Service Category </span>
                                </span>
                                <input class="form-control pt-0 ps-2 pb-0 col-md-8  harwareSc2" name="hardwareName" id="hardwareName" style="border-radius: 0; font-size: 13px; height: 25px;" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group Sn'>
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;">
                                    <span style="width: 147px; font-size: 13px; height: 25px;"> Serial Number </span>
                                </span>
                                <input class="form-control col-md-8 serialNumber" style="font-size: 13px; height: 25px;" name="serialNumber" id="serialNumber" disabled />
                                <span class="input-group-text pt-3 back" style="height: 25px;">
                                    <span style="width: 120px; font-size: 13px; height: 25px;">
                                        Control Number
                                    </span>
                                </span>
                                <input class="form-control controlNumber" name="controlNumber" id="controlNumber" style="border-radius: 0; font-size: 13px; height: 25px;" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group harwareSc'>
                                <span class="input-group-text pb-0 pt-0 back" style="border-radius: 0;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px;">
                                        Description
                                    </span>
                                </span>
                                <input style="height: 50px; border-radius: 0; font-size: 13px;" class="form-control col-md-8 harwareSc2" name="description" id="description" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group harwareSc'>
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 25px;">
                                        Request By
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height: 25px;" class="form-control col-md-8 dateStarted harwareSc2" name="fullName" id="fullName" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group Sn'>
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 25px;">
                                        Department
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height: 25px;" class="form-control pt-0 ps-2 pb-0 col-md-8  serialNumber" name="departmentName" id="departmentName" disabled />
                                <span class="input-group-text pt-3 back" id="inputGroupPrepend" style="height: 25px;">
                                    <span style="width: 120px; font-size: 13px; height: 25px;">
                                        Division
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height: 25px;" class="form-control pt-0 ps-2 pb-0  controlNumber" name="divisionName" id="divisionName" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12 ">
                            <div class='input-group Sn'>
                                <span class="input-group-text pt-3 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 25px;">
                                        IT Technician
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px;height: 25px;" class="form-control pt-0 ps-2 pb-0 col-md-8 dateStarted serialNumber" name="technicianName" id="technicianName" disabled />
                                <span class="input-group-text pt-3 back" id="inputGroupPrepend" style="height: 25px;">
                                    <span style="width: 120px; font-size: 13px; height: 25px;">
                                        Findings
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height: 25px;" class="form-control pt-0 ps-2 pb-0  controlNumber" name="findingName" id="findingName" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group harwareSc'>
                                <span class="input-group-text  pt-3 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 25px;"> Possible Cause </span>
                                </span>
                                <input style=" border-radius: 0; font-size: 13px; height: 25px;" class="form-control col-md-8 harwareSc2" name="possibleCause" id="possibleCause" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group harwareSc'>
                                <span class="input-group-text  pt-3 back" style="border-radius: 0; height: 50px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 50px;"> Remarks </span>
                                </span>
                                <input style="height: 50px; border-radius: 0; font-size: 13px; height: 50px;" class="form-control col-md-8 harwareSc2" name="remarks" id="remarks" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group Sn'>
                                <span class="input-group-text  pt-3 back" style="border-radius: 0; height: 25px;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px; height: 25px;">
                                        Date/Time Start
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 12px; height: 25px; padding-right:19px;" class="form-control pt-1 ps-2  col-md-8 harwareSc2" name="dateStarted" id="dateStarted" disabled />
                                <span class="input-group-text pt-3 back" id="inputGroupPrepend" style="border-left: 3px solid; border-right: 1px solid; height: 25px;">
                                    <span style="width: 120px; font-size: 13px; height: 25px;">
                                        Date/Time  Finish
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 12px; height: 25px; border-right: 1px solid;" class="form-control pt-1 ps-3  harwareSc2" name="dateEnded" id="dateEnded" disabled />
                            </div>
                        </div>
                        <div class=" col-md-12">
                            <div class='input-group date'>
                                <span class="input-group-text pb-0 pt-0 back" style="border-radius: 0;" id="inputGroupPrepend">
                                    <span style="width: 147px; font-size: 13px;">
                                        Verified By
                                        <br />
                                        Signature
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height:55px" class="form-control col-md-8 serialNumber" name="adminName" id="adminName" disabled />

                                <span class="input-group-text back" id="inputGroupPrepend">
                                    <span style="width: 120px; font-size: 13px;" class="ps-1">
                                        Approved By
                                        <br />
                                        Signature
                                    </span>
                                </span>
                                <input style="border-radius: 0; font-size: 13px; height: 55px " class="form-control harwareSc2" name="superName" id="superName" disabled />

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer mt-3">
                        <div id="divButtons" name="divButtons">
                            <button class="btn btn-primary" onclick="printthispage();">Print Me</button>
                        </div>
                        <button type="button" class="btn btn-secondary closebtn" data-bs-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
@section scripts {

        <script>
            function printthispage() {
                document.getElementById('divButtons').style.visibility = 'hidden';
                window.print();
                document.getElementById('divButtons').style.visibility = 'visible';
            }
            $(document).ready(function () {
                var table2 = $("#hardwareRequestList").DataTable({
                    "ajax": {
                        "url": "/api/v4/all/hardReq",
                        "headers": {
                            "Authorization": "Bearer " + localStorage.getItem('access_token')
                        },
                        "type": "GET",
                        "dataType": "json",
                    },
                    "processing": "true",
                    "serverSide": "true",
                    "ordering": "true",
                    "paging": "true",
                    "fnInitComplete": function () {
                        this.api()
                            .columns([4])
                            .every(function () {
                                var column = this;

                                // Create select element and listener
                                var select = $('<select class="form-control"><option value="">Show All</option></select>')
                                    .appendTo($(column.header()).empty())
                                    .on('change', function () {
                                        var val = DataTable.util.escapeRegex($(this).val());
                                        $('#pleasewait').modal('show');
                                        setTimeout(function () {
                                            $('#pleasewait').modal('hide');
                                        }, 700);
                                        $('#hardwareRequestList').DataTable().search(this.value).draw();
                                    });

                                // Add list of options
                                column
                                    .data()
                                    .unique()
                                    .sort()
                                    .each(function (d, j) {
                                        select.append('<option value="' + d + '">' + d + '</option>');
                                    });
                            });

                    },
                    "searching": " true",
                    "searchDelay": 1000,
                    // order by desc dateuploaded
                    "order": [[0, "desc"]],
                    "language": {
                        "processing": "Loading... Please wait"
                    },
                    "autoWidth": false,
                    "columns": [
                        {
                            data: "ticket",
                            render: function (data) {
                                return '<span class="shadow badge bg-primary">' + data + '</span>'
                            },
                        },
                        {
                            data: "dateAdded"
                        },
                        {
                            data: "fullName",

                        },
                        {
                            data: "hardwareName"
                        },
                        {
                            data: "status",
                            render: function (data, type, row) {
                                if (data == "Open") {
                                    return '<span class="shadow badge bg-secondary">' + data + '</span>'
                                }
                                else if (data == "In Progress") {
                                    return '<span class="shadow badge bg-info">' + data + '</span>'
                                }
                                else if (data == "Manual") {
                                    return '<span class="shadow badge bg-info">In Progress</span>'
                                }
                                else if (data == "Resolved") {
                                    return '<span class="shadow badge bg-success">' + data + '</span>'
                                }
                                else if (data == "Cancel") {
                                    return '<span class="shadow badge bg-danger">' + data + '</span>'
                                }
                                else if (data == "Pending Assigned Request") {
                                    return '<span class="shadow badge bg-warning">' + data + '</span>'
                                }
                                else if (data == "Verified") {

                                    return '<span class="shadow badge bg-primary">' + data + '</span>'
                                }
                                else if (data == "Approved") {

                                    return '<span class="shadow badge bg-danger">' + data + '</span>'
                                }
                            }
                        },
                        {
                            data: null
                        }
                    ],
                    columnDefs:
                        [{
                            targets: [-1], render: function (a, b, data, d) {
                                if (data.status == "Open") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-success btn-sm assign me-2" data-id="' + data.id + '"><i class="bi bi-person-check"></i> Assign Technician </button>';
                                }

                                else if (data.status == "In Progress") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-primary btn-sm transaction me-2" data-id="' + data.id + '"><i class="bi bi-list-nested"></i> Transaction </button>';
                                }

                                else if (data.status == "Manual") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-primary btn-sm transaction me-2" data-id="' + data.id + '"><i class="bi bi-list-nested"></i> Transaction </button>';
                                }
                                else if (data.status == "Resolved") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-primary btn-sm transaction me-2" data-id="' + data.id + '"><i class="bi bi-list-nested"></i> Transaction </button>';
                                       /* '<button class="btn ms-1 btn-outline-primary btn-sm back me-2 mt-2" data-id="' + data.id + '"><i class="bi bi-person-fill"></i> Return To Technician </button>';*/

                                }
                                else if (data.status == "Verified") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-primary btn-sm transaction me-2" data-id="' + data.id + '"><i class="bi bi-list-nested"></i> Transaction </button>';
                                }
                                else if (data.status == "Approved") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>' +
                                        '<button class="btn btn-outline-primary btn-sm transaction me-2" data-id="' + data.id + '"><i class="bi bi-list-nested"></i> Transaction </button>';
                                }
                                else if (data.status == "Cancel") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>';
                                }
                                else if (data.status == "Pending Assigned Request") {
                                    return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Info </button>';
                                }
                            },
                            orderable: false,
                            width: "250px"
                        }]
                });
                $('.hardwareTechnician').select2({
                    theme: 'bootstrap-5',
                    dropdownParent: $('#TechnicianModal .modal-content')
                });
                $('#hardwareRequestList').on('click', '.assign', function () {
                    var id = $(this).attr('data-id');
                    var url = '/api/userRequest/getbyId/' + id;
                    $.ajax({
                        type: 'GET',
                        url: url,
                        success: function (data) {
                            $('#TechnicianModal').modal('show');
                            $('#assignTech').find('input[name="hardwareUserRequestId"]').val(data.id);
                        }
                    })
                });
                $.ajax({
                    type: 'GET',
                    url: '/api/hardwareRequest/Technician',
                    headers: {
                        'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                    },
                    success: function (data) {
                        $('select[name=hardwareTechnicianId]').append('<option value=""> Select Technician</option>');
                        $.each(data, function (index, value) {
                            $('select[name=hardwareTechnicianId]').append('<option value="' + value.id + '">' + value.name + '</option>');
                        }
                        );
                    },
                });
                $('#updateTechnician').click(function (e) {
                    e.preventDefault();
                    var data = $('#assignTech').serialize();
                    console.log(data)
                    var id = $('#assignTech').find('input[name="id"]').val();
                    var hardwareUserRequestId = $('#assignTech').find('input[name="hardwareUserRequestId"]').val();

                    $.ajax({
                        type: 'POST',
                        url: '/api/v2/AssignTome/save',
                        data: data,
                        headers: {
                            'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                        },
                        success: function (data) {

                            $('#TechnicianModal').modal('hide');
                            $('#pleasewait').modal('show');
                            setTimeout(function () {
                                toastr.success(" Successfully Assigned The Request!");
                                // hide please wait modal
                            }, 2000);
                            setTimeout(function () {
                                location.reload();
                                $('#upload2')[0].reset();
                            }, 3000);
                        },
                        //if failed
                        error: function (data) {

                            toastr.error("Fill up alll forms / Invalid")
                        }
                    });
                });
                $('#updateTechnician').click(function (e) {
                    e.preventDefault();

                    var id = $('#assignTech').find('input[name="hardwareUserRequestId"]').val();
                    var data = $('#assignTech').serialize();
                    //alert(id);
                    $.ajax({
                        type: 'PUT',
                        url: '/api/hardware/acceptAssigned/' + id,
                        data: data,
                        headers: {
                            'Authorization': 'Bearer ' + localStorage.getItem('access_token')
                        },
                        success: function (data) {
                        },
                        //if faile
                        error: function (data) {
                            console.log(data.id);

                            toastr.error("Fill up alll forms / Invalid")
                        }
                    })
                });
                $('#hardwareRequestList').on('click', '.info', function () {
                    var id = $(this).attr('data-id');
                    var url = '/api/userRequest/getbyId/' + id;
                    $.ajax({
                        type: 'GET',
                        url: url,
                        success: function (data) {
                            $('#viewmodal').modal('show');
                            $('#viewRequest').find('input[name="fullName"]').val(data.fullName);
                            $('#viewRequest').find('input[name="ticket"]').val(data.ticket);
                            $('#viewRequest').find('input[name="dateAdded"]').val(data.dateAdded);
                            $('#viewRequest').find('input[name="mobileNumber"]').val(data.mobileNumber);
                            $('#viewRequest').find('input[name="departmentName"]').val(data.departmentName);
                            $('#viewRequest').find('input[name="divisionName"]').val(data.divisionName);
                            $('#viewRequest').find('input[name="hardwareName"]').val(data.hardwareName);
                            $('#viewRequest').find('input[name="modelName"]').val(data.modelName);
                            $('#viewRequest').find('input[name="uniTypes"]').val(data.uniTypes);
                            $('#viewRequest').find('input[name="brandName"]').val(data.brandName);
                            $('#viewRequest').find('input[name="FileName"]').val(data.documentLabel);
                            $('#viewRequest').find('textarea[name="description"]').val(data.description);

                            var uploadTable = $('#UploadList').DataTable({
                                destroy: true,
                                ajax: {
                                    url: "/api/v2/userUploads/" + id,
                                    dataSrc: '',
                                    headers: {
                                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                                    }
                                },
                                searching: false,
                                ordering: false,
                                columns: [
                                    {
                                        data: "dateAdded"
                                    },
                                    {
                                        data: "documentBlob",
                                        render: function (data, type, row, meta) {
                                            var fileType = row.fileName.split('.').pop();
                                            if (fileType == 'pdf') {
                                                return '<i class="fas fa-file-pdf fa-2x" style="color: red; font-size: 50px;"></i>';
                                            } else if (fileType == 'doc' || fileType == 'docx') {
                                                return '<i class="fas fa-file-word fa-2x" style="color: blue; font-size: 50px;"> </i>';
                                            } else if (fileType == 'xls' || fileType == 'xlsx') {
                                                return '<i class="fas fa-file-excel fa-2x" style="color: green; font-size: 50px;"></i>';
                                            } else if (fileType == 'ppt' || fileType == 'pptx') {
                                                return '<i class="fas fa-file-powerpoint fa-2x" style="color: orange; font-size: 50px;"></i>';
                                            } else if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg') {
                                                return '<img src="data:image/png;base64,' + data + '" class="avatar" width="250" height="250"/>';
                                            } else {
                                                return '<i class="bi bi-images" style="font-size: 250px;"></i> ';
                                            }

                                        },
                                        className: "text-center"

                                    },
                                    {
                                        // download link by using anchor link only
                                        data: "documentBlob",
                                        render: function (data, type, row) {
                                            var f = new Blob([s2ab(atob(data))], { type: "" });
                                            var filepath = row.imagePath + row.fileName.replace(/^.*[\\\/]/, '');
                                            var newF = URL.createObjectURL(f);
                                            urls.push(newF);
                                            var fileType = row.fileName.split('.').pop();

                                            //    check file if is image type
                                            if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg' || fileType == 'pdf' || fileType == 'gif') {
                                                // return '<a href="/api/v1/download/' + row.id + '" class="btn btn-sm btn-success">Download</a>'
                                                //     +
                                                return '<a href="' + newF + '" class="btn btn-sm btn-success" download="' + filepath + '">Download</a>';
                                            }
                                            else {
                                                return ''

                                            }
                                        },
                                        className: "text-center"
                                    },

                                ]
                            });

                        }
                    })
                });
                $('#hardwareRequestList').on('click', '.transaction', function () {
                    var id = $(this).attr('data-id');
                    var url = '/api/userRequest/getbyId/' + id;
                    $.ajax({
                        type: 'GET',
                        url: url,
                        success: function (data, value) {
                            $('#ReportModal').modal('show');
                            $('#transactional').find('input[name="hardwareUserRequestId"]').val(data.id);

                            var dataId = $('#transactional').find('input[name="hardwareUserRequestId"]').attr('value');
                            var table = $('#techList2').DataTable({
                                destroy: true,
                                ajax: {
                                    url: "/api/usertask/getbyId/" + dataId,
                                    dataSrc: '',
                                    headers: {
                                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                                    }
                                },
                                info: false,
                                paging: false,
                                searching: false,
                                ordering: false,

                                columns: [

                                    {
                                        data: "dateAdded"
                                    },
                                    {
                                        data: "hardwareUserRequestId",
                                        render: function (data, type, row) {
                                            return '<span class="badge shadow bg-primary">' + row.hardwareUserRequest.ticket +'</span>'
                                        }
                                    },
                                    {
                                        data: "hardwareUserRequest.fullName"
                                    },
                                    {
                                        data: "hardwareUserRequest.hardwareName"
                                    },
                                    {
                                        data: "hardwareTaskId",
                                        render: function (data, type, row) {
                                            if (data == 1) {
                                                return '<span class="badge shadow bg-info">Requested</span>'
                                            }
                                            else if (data == 2) {
                                                return '<span class="badge shadow bg-warning">Assigned</span>'
                                            }
                                            else if (data == 3) {
                                                return '<span class="badge shadow bg-success">Reported</span>'
                                            }
                                            else if (data == 4) {
                                                return '<span class="badge shadow bg-primary">Verified</span>'
                                            }
                                            else if (data == 5) {
                                                return '<span class="badge shadow bg-dark">Approved</span>'
                                            }
                                        }
                                    },
                                    {
                                        data: null,
                                    }
                                ],
                                columnDefs:
                                    [{
                                        targets: [-1], render: function (a, b, data, d) {
                                            if (data.hardwareTaskId == 1) {
                                                return '';
                                            }
                                            else if (data.hardwareTaskId == 2) {
                                                return '<button class="btn btn-outline-info btn-sm info-two me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Assigned Technician </button>';

                                            }
                                            else if (data.hardwareTaskId == 3) {
                                                return '<button class="btn btn-outline-info btn-sm info-three me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Technician Report </button>';

                                            }
                                            else if (data.hardwareTaskId == 4) {
                                                return '<button class="btn btn-outline-info btn-sm info-four me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Verified </button>' +
                                                    '<button class="btn btn-outline-dark btn-sm mt-1 print me-2" data-id="' + data.id + '"><i class="bi bi-printer"></i> Print </button>';

                                            }
                                            else if (data.hardwareTaskId == 5) {
                                                return '<button class="btn btn-outline-info btn-sm info-five me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Approved </button>' +
                                                    '<button class="btn btn-outline-dark btn-sm mt-1 print me-2" data-id="' + data.id + '"><i class="bi bi-printer"></i> Print </button>';

                                            }
                                            else if (data.hardwareTaskId == 2) {
                                                return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Assigned Technician </button>';
                                            }
                                            else if (data.hardwareTaskId == null) {
                                                return '<button class="btn btn-outline-info btn-sm info me-2" data-id="' + data.id + '"><i class="bi bi-list-ul"></i> Cancel </button>';
                                            }
                                        },
                                        orderable: false,
                                        width: "250px"
                                    }]
                            });

                        },
                        error: function (data) {
                            toastr.error("Failed")
                        }

                    })
                    // alert(data);
                });



                $('#techList2').on('click', '.info-two', function () {
                    var id = $(this).attr('data-id');
                    $.ajax({
                        type: 'GET',
                        url: "/api/techAssign/get/" + id,
                        success: function (data) {
                            $('#ReportModal').modal('hide');
                            $('#AssignedTech').modal('show');
                            $('#assigneform').find('input[name="technicianName"]').val(data.technicianReport.technicianName);
                          
                        }
                    });
                });

                $('#techList2').on('click', '.info-three', function () {
                    var id = $(this).attr('data-id');
                    $.ajax({
                        type: 'GET',
                        url: "/api/techAssign/get/" + id,
                        success: function (data) {
                            $('#ReportModal').modal('hide');
                            $('#viewmodal-resolved').modal('show');
                            $('#viewRequest-resolved').find('input[name="technicianName"]').val(data.technicianReport.technicianName);
                            $('#viewRequest-resolved').find('input[name="hardwareName"]').val(data.technicianReport.hardwareName);
                            $('#viewRequest-resolved').find('input[name="modelName"]').val(data.technicianReport.modelName);
                            $('#viewRequest-resolved').find('input[name="uniTypes"]').val(data.technicianReport.uniTypes);
                            $('#viewRequest-resolved').find('input[name="brandName"]').val(data.technicianReport.brandName);
                            $('#viewRequest-resolved').find('textarea[name="remarks"]').val(data.technicianReport.remarks);
                            $('#viewRequest-resolved').find('input[name="possibleCause"]').val(data.technicianReport.possibleCause);
                            $('#viewRequest-resolved').find('input[name="findingName"]').val(data.technicianReport.findingName);
                            $('#viewRequest-resolved').find('input[name="controlNumber"]').val(data.technicianReport.controlNumber);
                            $('#viewRequest-resolved').find('input[name="serialNumber"]').val(data.technicianReport.serialNumber);
                            $('#viewRequest-resolved').find('input[name="dateStarted"]').val(data.technicianReport.dateStarted);
                            $('#viewRequest-resolved').find('input[name="dateEnded"]').val(data.technicianReport.dateEnded);
                            $('#viewRequest-resolved').find('input[name="dateAssigned"]').val(data.technicianReport.dateAssigned);
                            $('#viewRequest-resolved').find('input[name="technicianReportId"]').val(data.technicianReport.id);

                            var techId = $('#viewRequest-resolved').find('input[name="technicianReportId"]').attr('value');
                            
                            console.log(techId);
                            var uploadTable = $('#UploadList-progress').DataTable({
                                destroy: true,
                                ajax: {
                                    url: "/api/techUploads/get/" + techId,
                                    dataSrc: '',
                                    headers: {
                                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                                    }
                                },
                                searching: false,
                                ordering: false,
                                columns: [
                                    {
                                        data: "dateAdded"
                                    },
                                    {
                                        data: "documentBlob",
                                        render: function (data, type, row, meta) {
                                            var fileType = row.fileName.split('.').pop();
                                            if (fileType == 'pdf') {
                                                return '<i class="fas fa-file-pdf fa-2x" style="color: red; font-size: 50px;"></i>';
                                            } else if (fileType == 'doc' || fileType == 'docx') {
                                                return '<i class="fas fa-file-word fa-2x" style="color: blue; font-size: 50px;"> </i>';
                                            } else if (fileType == 'xls' || fileType == 'xlsx') {
                                                return '<i class="fas fa-file-excel fa-2x" style="color: green; font-size: 50px;"></i>';
                                            } else if (fileType == 'ppt' || fileType == 'pptx') {
                                                return '<i class="fas fa-file-powerpoint fa-2x" style="color: orange; font-size: 50px;"></i>';
                                            } else if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg') {
                                                return '<img src="data:image/png;base64,' + data + '" class="avatar" width="250" height="250"/>';
                                            } else {
                                                return '<i class="bi bi-images" style="font-size: 250px;"></i> ';
                                            }

                                        },
                                        className: "text-center"

                                    },
                                    {
                                        // download link by using anchor link only
                                        data: "documentBlob",
                                        render: function (data, type, row) {
                                            var f = new Blob([s2ab(atob(data))], { type: "" });
                                            var filename = row.imagePath.replace(/^.*[\\\/]/, '');
                                            var newF = URL.createObjectURL(f);
                                            urls.push(newF);
                                            var fileType = row.imagePath.split('.').pop();

                                            //    check file if is image type
                                            if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg' || fileType == 'pdf' || fileType == 'gif') {
                                                // return '<a href="/api/v1/download/' + row.id + '" class="btn btn-sm btn-success">Download</a>'
                                                //     +
                                                return '<a href="' + newF + '" class="btn btn-sm btn-success" download="' + filename + '">Download</a>';
                                            }
                                            else {
                                                return ''

                                            }
                                        },
                                        className: "text-center"
                                    },

                                ]
                            });
                        }
                    });
                });

                $('#techList2').on('click', '.info-four', function () {
                    var id = $(this).attr('data-id');
                    $.ajax({
                        type: 'GET',
                        url: "/api/techAssign/get/" + id,
                        success: function (data) {
                            $('#ReportModal').modal('hide');
                            $('#viewmodal-verified').modal('show');
                            $('#viewRequest-verified').find('input[name="technicianName"]').val(data.technicianReport.technicianName);
                            $('#viewRequest-verified').find('input[name="hardwareName"]').val(data.technicianReport.hardwareName);
                            $('#viewRequest-verified').find('input[name="modelName"]').val(data.technicianReport.modelName);
                            $('#viewRequest-verified').find('input[name="uniTypes"]').val(data.technicianReport.uniTypes);
                            $('#viewRequest-verified').find('input[name="brandName"]').val(data.technicianReport.brandName);
                            $('#viewRequest-verified').find('textarea[name="remarks"]').val(data.technicianReport.remarks);
                            $('#viewRequest-verified').find('input[name="possibleCause"]').val(data.technicianReport.possibleCause);
                            $('#viewRequest-verified').find('input[name="findingName"]').val(data.technicianReport.findingName);
                            $('#viewRequest-verified').find('input[name="controlNumber"]').val(data.technicianReport.controlNumber);
                            $('#viewRequest-verified').find('input[name="serialNumber"]').val(data.technicianReport.serialNumber);
                            $('#viewRequest-verified').find('input[name="dateStarted"]').val(data.technicianReport.dateStarted);
                            $('#viewRequest-verified').find('input[name="dateEnded"]').val(data.technicianReport.dateEnded);
                            $('#viewRequest-verified').find('input[name="dateAssigned"]').val(data.technicianReport.dateAssigned);
                            $('#viewRequest-verified').find('input[name="technicianReportId"]').val(data.technicianReport.id);
                            $('#viewRequest-verified').find('input[name="dateVerified"]').val(data.hardwareVerify.dateVerified);
                            $('#viewRequest-verified').find('input[name="name"]').val(data.hardwareVerify.name);
                            var techId = $('#viewRequest-verified').find('input[name="technicianReportId"]').attr('value');

                            console.log(techId);
                            var uploadTable = $('#UploadList-progress2').DataTable({
                                destroy: true,
                                ajax: {
                                    url: "/api/techUploads/get/" + techId,
                                    dataSrc: '',
                                    headers: {
                                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                                    }
                                },
                                searching: false,
                                ordering: false,
                                columns: [
                                    {
                                        data: "dateAdded"
                                    },
                                    {
                                        data: "documentBlob",
                                        render: function (data, type, row, meta) {
                                            var fileType = row.imagePath.split('.').pop();
                                            if (fileType == 'pdf') {
                                                return '<i class="fas fa-file-pdf fa-2x" style="color: red; font-size: 50px;"></i>';
                                            } else if (fileType == 'doc' || fileType == 'docx') {
                                                return '<i class="fas fa-file-word fa-2x" style="color: blue; font-size: 50px;"> </i>';
                                            } else if (fileType == 'xls' || fileType == 'xlsx') {
                                                return '<i class="fas fa-file-excel fa-2x" style="color: green; font-size: 50px;"></i>';
                                            } else if (fileType == 'ppt' || fileType == 'pptx') {
                                                return '<i class="fas fa-file-powerpoint fa-2x" style="color: orange; font-size: 50px;"></i>';
                                            } else if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg') {
                                                return '<img src="data:image/png;base64,' + data + '" class="avatar" width="250" height="250"/>';
                                            } else {
                                                return '<i class="bi bi-images" style="font-size: 250px;"></i> ';
                                            }
                                        },
                                        className: "text-center"

                                    },
                                    {
                                        // download link by using anchor link only
                                        data: "documentBlob",
                                        render: function (data, type, row) {
                                            var f = new Blob([s2ab(atob(data))], { type: "" });
                                            var filename = row.imagePath.replace(/^.*[\\\/]/, '');
                                            var newF = URL.createObjectURL(f);
                                            urls.push(newF);
                                            var fileType = row.imagePath.split('.').pop();

                                            //    check file if is image type
                                            if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg' || fileType == 'pdf' || fileType == 'gif') {
                                                // return '<a href="/api/v1/download/' + row.id + '" class="btn btn-sm btn-success">Download</a>'
                                                //     +
                                                return '<a href="' + newF + '" class="btn btn-sm btn-success" download="' + filename + '">Download</a>';
                                            }
                                            else {
                                                return ''

                                            }
                                        },
                                        className: "text-center"
                                    },

                                ]
                            });
                        }
                    });
                });

                $('#techList2').on('click', '.info-five', function () {
                    var id = $(this).attr('data-id');
                    $.ajax({
                        type: 'GET',
                        url: "/api/techAssign/get/" + id,
                        success: function (data) {
                            $('#ReportModal').modal('hide');
                            $('#viewmodal-approved').modal('show');
                            $('#viewRequest-approved').find('input[name="technicianName"]').val(data.technicianReport.technicianName);
                            $('#viewRequest-approved').find('input[name="hardwareName"]').val(data.technicianReport.hardwareName);
                            $('#viewRequest-approved').find('input[name="modelName"]').val(data.technicianReport.modelName);
                            $('#viewRequest-approved').find('input[name="uniTypes"]').val(data.technicianReport.uniTypes);
                            $('#viewRequest-approved').find('input[name="brandName"]').val(data.technicianReport.brandName);
                            $('#viewRequest-approved').find('textarea[name="remarks"]').val(data.technicianReport.remarks);
                            $('#viewRequest-approved').find('input[name="possibleCause"]').val(data.technicianReport.possibleCause);
                            $('#viewRequest-approved').find('input[name="findingName"]').val(data.technicianReport.findingName);
                            $('#viewRequest-approved').find('input[name="controlNumber"]').val(data.technicianReport.controlNumber);
                            $('#viewRequest-approved').find('input[name="serialNumber"]').val(data.technicianReport.serialNumber);
                            $('#viewRequest-approved').find('input[name="dateStarted"]').val(data.technicianReport.dateStarted);
                            $('#viewRequest-approved').find('input[name="dateEnded"]').val(data.technicianReport.dateEnded);
                            $('#viewRequest-approved').find('input[name="dateAssigned"]').val(data.technicianReport.dateAssigned);
                            $('#viewRequest-approved').find('input[name="technicianReportId"]').val(data.technicianReport.id);
                            $('#viewRequest-approved').find('input[name="dateVerified"]').val(data.hardwareVerify.dateVerified);
                            $('#viewRequest-approved').find('input[name="name"]').val(data.hardwareVerify.name);
                            $('#viewRequest-approved').find('input[name="nameApproval"]').val(data.hardwareApproval.nameApproval);
                            $('#viewRequest-approved').find('input[name="dateApprove"]').val(data.hardwareApproval.dateApprove);
                            $('#viewRequest-approved').find('textarea[name="remarksApproval"]').val(data.hardwareApproval.remarksApproval);

                            var techId = $('#viewRequest-approved').find('input[name="technicianReportId"]').attr('value');

                            console.log(techId);
                            var uploadTable = $('#UploadList-progress3').DataTable({
                                destroy: true,
                                ajax: {
                                    url: "/api/techUploads/get/" + techId,
                                    dataSrc: '',
                                    headers: {
                                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                                    }
                                },
                                searching: false,
                                ordering: false,
                                columns: [
                                    {
                                        data: "dateAdded"
                                    },
                                    {
                                        data: "documentBlob",
                                        render: function (data, type, row, meta) {
                                            var fileType = row.imagePath.split('.').pop();
                                            if (fileType == 'pdf') {
                                                return '<i class="fas fa-file-pdf fa-2x" style="color: red; font-size: 50px;"></i>';
                                            } else if (fileType == 'doc' || fileType == 'docx') {
                                                return '<i class="fas fa-file-word fa-2x" style="color: blue; font-size: 50px;"> </i>';
                                            } else if (fileType == 'xls' || fileType == 'xlsx') {
                                                return '<i class="fas fa-file-excel fa-2x" style="color: green; font-size: 50px;"></i>';
                                            } else if (fileType == 'ppt' || fileType == 'pptx') {
                                                return '<i class="fas fa-file-powerpoint fa-2x" style="color: orange; font-size: 50px;"></i>';
                                            } else if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg') {
                                                return '<img src="data:image/png;base64,' + data + '" class="avatar" width="250" height="250"/>';
                                            } else {
                                                return '<i class="bi bi-images" style="font-size: 250px;"></i> ';
                                            }
                                        },
                                        className: "text-center"

                                    },
                                    {
                                        // download link by using anchor link only
                                        data: "documentBlob",
                                        render: function (data, type, row) {
                                            var f = new Blob([s2ab(atob(data))], { type: "" });
                                            var filename = row.imagePath.replace(/^.*[\\\/]/, '');
                                            var newF = URL.createObjectURL(f);
                                            urls.push(newF);
                                            var fileType = row.imagePath.split('.').pop();

                                            //    check file if is image type
                                            if (fileType == 'jpg' || fileType == 'png' || fileType == 'jpeg' || fileType == 'pdf' || fileType == 'gif') {
                                                // return '<a href="/api/v1/download/' + row.id + '" class="btn btn-sm btn-success">Download</a>'
                                                //     +
                                                return '<a href="' + newF + '" class="btn btn-sm btn-success" download="' + filename + '">Download</a>';
                                            }
                                            else {
                                                return ''

                                            }
                                        },
                                        className: "text-center"
                                    },

                                ]
                            });
                        }
                    });
                });


                $('.hardwareTechnician2').select2({
                    theme: 'bootstrap-5',
                    dropdownParent: $('#TechnicianModal2 .modal-content')
                });

                $('#techList2').on('click', '.print', function () {
                    var id = $(this).attr('data-id');
                    var url = '/api/techAssign/get/' + id;

                    $.ajax({
                        type: 'GET',
                        url: url,
                        success: function (data) {
                            $('#PrintModal').modal('show');
                            $('#print').find('input[name="id"]').val(data.id);
                            $('#print').find('input[name="ticket"]').val(data.hardwareUserRequest.ticket);
                            $('#print').find('input[name="fullName"]').val(data.hardwareUserRequest.fullName);
                            $('#print').find('input[name="hardwareName"]').val(data.hardwareName);
                            $('#print').find('input[name="description"]').val(data.hardwareUserRequest.description);
                            $('#print').find('input[name="departmentName"]').val(data.hardwareUserRequest.departmentName);
                            $('#print').find('input[name="divisionName"]').val(data.hardwareUserRequest.divisionName);
                            $('#print').find('input[name="technicianName"]').val(data.technicianReport.technicianName);
                            $('#print').find('input[name="findingName"]').val(data.technicianReport.findingName);
                            $('#print').find('input[name="possibleCause"]').val(data.technicianReport.possibleCause);
                            $('#print').find('input[name="remarks"]').val(data.technicianReport.remarks);
                            $('#print').find('input[name="dateStarted"]').val(data.technicianReport.dateStarted);
                            $('#print').find('input[name="dateEnded"]').val(data.technicianReport.dateEnded);
                            $('#print').find('input[name="adminName"]').val(data.technicianReport.adminName);
                            $('#print').find('input[name="superName"]').val(data.technicianReport.superName);
                            $('#print').find('input[name="serialNumber"]').val(data.technicianReport.serialNumber);
                            $('#print').find('input[name="controlNumber"]').val(data.technicianReport.controlNumber);

                        }
                    })
                });
               

                
            });
        </script>
}