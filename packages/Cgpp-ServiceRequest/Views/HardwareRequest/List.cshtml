
@{
    ViewBag.Title = "List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (User.IsInRole("HardwareAdmin") || User.IsInRole("SuperAdmin") || User.IsInRole("Developer"))
{
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body mb-4">
                    <h4 class="card-title d-flex justify-content-between">
                        Assigned Request
                    </h4>
                    <h6 class="card-subtitle"></h6>
                    <div class="table-responsive">
                        <table id="techlistCount" class="table table-condensed">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Year</th>
                                    <th>Month</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card">
                <div class="card-body mb-4">
                    <h4 class="card-title d-flex justify-content-between">
                        Unit Category
                    </h4>
                    <h6 class="card-subtitle"></h6>
                    <div class="table-responsive">
                        <table id="hrdListCount" class="table table-condensed">
                            <thead>
                                <tr>
                                    <th>Unit</th>
                                    <th>Year</th>
                                    <th>Month</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-12">
            <div class="card">
                <div class="card-body mb-4">
                    <h4 class="card-title d-flex justify-content-between">
                        Hardware Category
                    </h4>
                    <h6 class="card-subtitle"></h6>
                    <div class="table-responsive">
                        <table id="hrdCatCount" class="table table-condensed">
                            <thead>
                                <tr>
                                    <th>Services</th>
                                    <th>Year</th>
                                    <th>Month</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


@section scripts {
    <script>
        $(document).ready(function () {
            $('#techlistCount').DataTable({
                ajax: {
                    url: '/ServiceRequest/api/v2/hrdTech/count',
                    dataSrc: "",
                    headers: {
                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                    }
                },
                autoWidth: false,
                columns: [
                    {
                        data: 'name',
                        render: function (data, type, row) {
                            if (data == null) {
                                return '--'
                            }
                            return `${(data)}`
                        }


                    },

                    {
                        // display count
                        data: 'year',
                    },
                    {
                        data: 'month',
                        render: function (data, row) {
                            if (data == 1) {
                                return 'January'
                            }
                            else if (data == 2) {
                                return 'February'
                            }
                            else if (data == 3) {
                                return 'March'
                            }
                            else if (data == 4) {
                                return 'April'
                            }
                            else if (data == 5) {
                                return 'May '
                            }
                            else if (data == 6) {
                                return 'June '
                            }
                            else if (data == 7) {
                                return 'July '
                            }
                            else if (data == 8) {
                                return 'August '
                            }
                            else if (data == 9) {
                                return 'September '
                            }
                            else if (data == 10) {
                                return 'October '
                            }
                            else if (data == 11) {
                                return 'November '
                            }
                            else if (data == 12) {
                                return 'December '
                            }
                            else
                                return ''
                        }
                    },
                    {
                        data: "count",
                    },
                ]
            });

            $('#hrdListCount').DataTable({
                ajax: {
                    url: '/ServiceRequest/api/v2/hrd/count',
                    dataSrc: "",
                    headers: {
                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                    }
                },
                autoWidth: false,
                columns: [
                    {
                        data: 'name',
                        render: function (data, type, row) {
                            if (data == null) {
                                return '--'
                            }
                            return `${(data)}`
                        }

                    },

                    {
                        // display count
                        data: 'year',
                    },
                    {
                        data: 'month',
                        render: function (data, row) {
                            if (data == 1) {
                                return 'January'
                            }
                            else if (data == 2) {
                                return 'February'
                            }
                            else if (data == 3) {
                                return 'March'
                            }
                            else if (data == 4) {
                                return 'April'
                            }
                            else if (data == 5) {
                                return 'May '
                            }
                            else if (data == 6) {
                                return 'June '
                            }
                            else if (data == 7) {
                                return 'July '
                            }
                            else if (data == 8) {
                                return 'August '
                            }
                            else if (data == 9) {
                                return 'September '
                            }
                            else if (data == 10) {
                                return 'October '
                            }
                            else if (data == 11) {
                                return 'November '
                            }
                            else if (data == 12) {
                                return 'December '
                            }
                            else
                                return ''
                        }
                    },
                    {
                        data: "count",
                    },
                ]
            });

            $('#hrdCatCount').DataTable({
                ajax: {
                    url: '/ServiceRequest/api/v2/hrdServices/count',
                    dataSrc: "",
                    headers: {
                        "Authorization": "Bearer " + localStorage.getItem('access_token')
                    }
                },
                autoWidth: false,
                columns: [
                    {
                        data: 'name',
                        render: function (data, type, row) {
                            if (data == null) {
                                return '--'
                            }
                            return `${(data)}`
                        }

                    },

                    {
                        // display count
                        data: 'year',
                    },
                    {
                        data: 'month',
                        render: function (data, row) {
                            if (data == 1) {
                                return 'January'
                            }
                            else if (data == 2) {
                                return 'February'
                            }
                            else if (data == 3) {
                                return 'March'
                            }
                            else if (data == 4) {
                                return 'April'
                            }
                            else if (data == 5) {
                                return 'May '
                            }
                            else if (data == 6) {
                                return 'June '
                            }
                            else if (data == 7) {
                                return 'July '
                            }
                            else if (data == 8) {
                                return 'August '
                            }
                            else if (data == 9) {
                                return 'September '
                            }
                            else if (data == 10) {
                                return 'October '
                            }
                            else if (data == 11) {
                                return 'November '
                            }
                            else if (data == 12) {
                                return 'December '
                            }
                            else
                                return ''
                        }
                    },
                    {
                        data: "count",
                    },
                ]
            });
        });
    </script>
}
